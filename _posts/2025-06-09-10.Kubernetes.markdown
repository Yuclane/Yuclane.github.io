---
layout: post
title:  "Kubernetesì˜ ê°œìš”ë¶€í„° ì„¤ì¹˜ ë° ì‹¤ìŠµ"
date:   2025-06-09 17:44 +0900
categories: Kubernetes 
---

Kubernetesì˜ ê°„ë‹¨í•œ ì„¤ì¹˜ ë¶€í„° ê¸°ë³¸ì ì¸ ì»¨í…Œì´ë„ˆ/í¬ë“œ ê´€ë¦¬

# Cloud Nativeì™€ Kubernetes ì™„ë²½ ê°€ì´ë“œ

## ëª©ì°¨ (Table of Contents)
1. [Cloud Native, Docker Container ì´í•´](#1-cloud-native-docker-container-ì´í•´)
2. [ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì´í•´](#2-ì¿ ë²„ë„¤í‹°ìŠ¤ì˜-ì´í•´)
3. [ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜](#3-ì¿ ë²„ë„¤í‹°ìŠ¤-ì„¤ì¹˜)
4. [ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ëª…ë ¹ì–´](#4-ì¿ ë²„ë„¤í‹°ìŠ¤ì˜-ëª…ë ¹ì–´)
5. [EKS ì„¤ì¹˜ ë° ì‚­ì œ](#5-eks-ì„¤ì¹˜-ë°-ì‚­ì œ)

---

## 1. Cloud Native, Docker Container ì´í•´

### 1.1 í´ë¼ìš°ë“œ ì»´í“¨íŒ…

**í´ë¼ìš°ë“œ ì»´í“¨íŒ…**ì€ ì»´í“¨íŒ… íŒŒì›Œ, ë°ì´í„°ë² ì´ìŠ¤, ìŠ¤í† ë¦¬ì§€, ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ê¸°íƒ€ IT ë¦¬ì†ŒìŠ¤ë¥¼ **ì˜¨ë””ë§¨ë“œë¡œ ì¸í„°ë„·ì„ í†µí•´ ì œê³µ**í•˜ê³  **ì‚¬ìš©í•œ ë§Œí¼ë§Œ ë¹„ìš©ì„ ì§€ë¶ˆ**í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

### 1.2 í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ

- **í´ë¼ìš°ë“œ ì»´í“¨íŒ… í™˜ê²½ì—ì„œ í˜„ëŒ€ì  ì• í”Œë¦¬ì¼€ì´ì…˜**ì„ êµ¬ì¶•, ë°°í¬ ë° ê´€ë¦¬í•  ë•Œì˜ ì†Œí”„íŠ¸ì›¨ì–´ ì ‘ê·¼ ë°©ì‹
- í˜„ëŒ€ì ì¸ íšŒì‚¬ëŠ” ê³ ê°ì˜ ìš”êµ¬ë¥¼ ì¶©ì¡±í•˜ê¸° ìœ„í•´ ì‹ ì†í•˜ê²Œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” **í™•ì¥ì„±, ìœ ì—°ì„± ë° ë³µì›ë ¥**ì´ ë›°ì–´ë‚œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ê³ ì í•¨
- ì´ë¥¼ ìœ„í•´ **í´ë¼ìš°ë“œ ì¸í”„ë¼ì—ì„œ ì§€ì›í•˜ëŠ” í˜„ëŒ€ì ì¸ ë„êµ¬ì™€ ê¸°ìˆ **ì„ ì‚¬ìš©
- ì´ëŸ¬í•œ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ìˆ ì€ ì„œë¹„ìŠ¤ ì œê³µì— ë¯¸ì¹˜ëŠ” ì˜í–¥ ì—†ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë¹ ë¥´ê²Œ ìì£¼ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ì—¬ **í˜ì‹  ì—­ëŸ‰ê³¼ ê²½ìŸë ¥**ì„ ì œê³µ

### 1.3 CNCF (Cloud Native Computing Foundation)

- [Linux Foundation](https://www.linuxfoundation.org/)(ë¹„ì˜ë¦¬)ì˜ [í•˜ìœ„ ì¬ë‹¨](https://www.cncf.io/about/faq/#what-is-the-relationship-between-the-cncf-and-the-linux-foundation)
- **í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì»´í“¨íŒ…ì˜ ë²¤ë”(ê³µê¸‰ì—…ì²´) ì¤‘ë¦½ì  ì˜¤í”ˆ ì†ŒìŠ¤ í—ˆë¸Œ**
- Kubernetes ë° Prometheusì™€ ê°™ì€ í”„ë¡œì íŠ¸ë¥¼ í˜¸ìŠ¤íŒ…í•˜ì—¬ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œë¥¼ ë³´í¸ì ì´ê³  ì§€ì† ê°€ëŠ¥í•˜ê²Œ í•¨
- ì„¸ê³„ ìµœê³ ì˜ ê°œë°œì, ìµœì¢… ì‚¬ìš©ì ë° ê³µê¸‰ì—…ì²´ë¥¼ ëª¨ì•„ ìµœëŒ€ ê·œëª¨ì˜ ì˜¤í”ˆ ì†ŒìŠ¤ ê°œë°œì ì»¨í¼ëŸ°ìŠ¤ë¥¼ ìš´ì˜

### 1.4 CNCFê°€ ì •ì˜í•œ Cloud Native

í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê¸°ìˆ ì€ ì¡°ì§ì´ í¼ë¸”ë¦­, í”„ë¼ì´ë¹—, ê·¸ë¦¬ê³  í•˜ì´ë¸Œë¦¬ë“œ í´ë¼ìš°ë“œì™€ ê°™ì€ í˜„ëŒ€ì ì´ê³  ë™ì ì¸ í™˜ê²½ì—ì„œ í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

#### 1.4.1 í•µì‹¬ ê¸°ìˆ 

**ì»¨í…Œì´ë„ˆ, ì„œë¹„ìŠ¤ ë©”ì‰¬, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤, ë¶ˆë³€(Immutable) ì¸í”„ë¼, ì„ ì–¸í˜•(Declarative) API**

#### 1.4.2 íŠ¹ì§•
- íšŒë³µì„±, ê´€ë¦¬ í¸ì˜ì„±, ê°€ì‹œì„±ì„ ê°–ì¶˜ **ëŠìŠ¨í•˜ê²Œ ê²°í•©ëœ ì‹œìŠ¤í…œ**ì„ ê°€ëŠ¥í•˜ê²Œ í•¨
- ê²¬ê³ í•œ ìë™í™” ê¸°ëŠ¥ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, ì—”ì§€ë‹ˆì–´ëŠ” **ì˜í–¥ì´ í° ë³€ê²½ì„ ìµœì†Œí•œì˜ ë…¸ë ¥ìœ¼ë¡œ ìì£¼, ì˜ˆì¸¡ ê°€ëŠ¥í•˜ê²Œ ìˆ˜í–‰**í•  ìˆ˜ ìˆìŒ
- Cloud Native Computing Foundationì€ ë²¤ë” ì¤‘ë¦½ì ì¸ ì˜¤í”ˆ ì†ŒìŠ¤ í”„ë¡œì íŠ¸ ìƒíƒœê³„ë¥¼ ìœ¡ì„±í•˜ê³  ìœ ì§€í•¨ìœ¼ë¡œì¨ í•´ë‹¹ íŒ¨ëŸ¬ë‹¤ì„ ì±„íƒì„ ì´‰ì§„

### 1.5 í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ í•µì‹¬ ê¸°ìˆ 

#### 1.5.1 ì»¨í…Œì´ë„ˆ

![ì»¨í…Œì´ë„ˆ ê°œë…ë„](/assets/Images/10.Kubernetes/image.png)

*ì»¨í…Œì´ë„ˆì˜ êµ¬ì¡°ì™€ íŠ¹ì§•*

- ì»¨í…Œì´ë„ˆëŠ” **ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê·¸ ì˜ì¡´ì„±ì„ í•¨ê»˜ íŒ¨í‚¤ì§•**í•˜ì—¬ ê²©ë¦¬ëœ í™˜ê²½ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ê°€ìƒí™” ê¸°ìˆ 
- í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ **ê°€ì¥ ì‘ì€ ì»´í“¨íŒ… ìœ ë‹›**
- ì½”ë“œ, ëŸ°íƒ€ì„, ì‹œìŠ¤í…œ ë„êµ¬, ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì„¤ì •ê³¼ ê°™ì´ ì–´ë–¤ í™˜ê²½ì—ì„œë‚˜ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ìš”ì†Œë¥¼ í¬í•¨
- **ê²½ëŸ‰ì˜ ë…ë¦½ ì‹¤í–‰í˜• ì†Œí”„íŠ¸ì›¨ì–´ íŒ¨í‚¤ì§€**, ì• í”Œë¦¬ì¼€ì´ì…˜ ê°€ìƒí™”
- í¬íŠ¸ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆê³ , ì»¨í…Œì´ë„ˆë³„ë¡œ ì„¤ì •ì´ ê°€ëŠ¥

#### 1.5.2 ì„œë¹„ìŠ¤ ë©”ì‹œ

![ì„œë¹„ìŠ¤ ë©”ì‹œ êµ¬ì¡°ë„](/assets/Images/10.Kubernetes/image%201.png)

*ì„œë¹„ìŠ¤ ë©”ì‹œì˜ ì•„í‚¤í…ì²˜ì™€ í†µì‹  ë°©ì‹*

- ì„œë¹„ìŠ¤ ë©”ì‹œëŠ” **ì—¬ëŸ¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ê°„ì˜ í†µì‹ ì„ ê´€ë¦¬**í•˜ëŠ” í´ë¼ìš°ë“œ ì¸í”„ë¼ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ê³„ì¸µìœ¼ë¡œ ì»¨í…Œì´ë„ˆí™”ëœ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ êµ¬ì„±
- ê°œë°œìëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ìƒˆ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šê³ ë„ ì„œë¹„ìŠ¤ ë©”ì‹œë¥¼ ì‚¬ìš©í•˜ì—¬ **ì¶”ê°€ ê¸°ëŠ¥ì„ ë„ì…**í•  ìˆ˜ ìˆìŒ
- ì„œë¹„ìŠ¤ ê°„ ì—°ê²°ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ **ëª¨ë‹ˆí„°ë§, ë¡œê¹…, ì¶”ì , íŠ¸ë˜í”½ ì œì–´**ì™€ ê°™ì€ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì œê³µ
- ì´ëŸ¬í•œ ê¸°ëŠ¥ì€ ê° ì„œë¹„ìŠ¤ì˜ ì½”ë“œì™€ ë…ë¦½ì ì´ë¯€ë¡œ ë„¤íŠ¸ì›Œí¬ ê²½ê³„ë¥¼ ë„˜ì–´ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê´€ë¦¬ ì‹œìŠ¤í…œì—ì„œ ì‘ë™
- **Istio**ëŠ” ì£¼ë¡œ Kubernetesì™€ í•¨ê»˜ ì‘ë™í•˜ë„ë¡ ì„¤ê³„ëœ ì˜¤í”ˆ ì†ŒìŠ¤ ì„œë¹„ìŠ¤ ë©”ì‹œ í”„ë¡œì íŠ¸

> ğŸ’¡ **ì°¸ê³ **: ìµœê·¼ì—ëŠ” Ciliumì´ íŠ¸ë Œë“œë¡œ ì˜¬ë¼ì˜¤ê³  ìˆìŠµë‹ˆë‹¤.

#### 1.5.3 ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤

![ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ vs ëª¨ë†€ë¦¬ì‹](/assets/Images/10.Kubernetes/image%202.png)

*ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ ë¹„êµ*

- **ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì„ ìœ„í•œ ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼** (ë…ë¦½ì ì¸ ì†Œê·œëª¨ íŒ€ì—ì„œ ì„œë¹„ìŠ¤ ê°œë°œ)
- ëŒ€ê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°ê° ë‹´ë‹¹ ì˜ì—­ì„ ê°€ì§„ **ì†Œê·œëª¨ì˜ ë…ë¦½ì ì¸ êµ¬ì„±ìš”ì†Œë¡œ êµ¬ë¶„**
- ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì˜ ê²½ìš°, ì„œë¹„ìŠ¤ê°€ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íŠ¹ì • ê¸°ëŠ¥ì— ëŒ€í•œ ìˆ˜ìš”ë¥¼ ì¶©ì¡±í•˜ë„ë¡ **ê°ê°ì˜ ì„œë¹„ìŠ¤ë¥¼ ì—…ë°ì´íŠ¸, ë°°í¬ ë° í™•ì¥** ê°€ëŠ¥
- ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜ì˜ ê²½ìš° ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ê¸´ë°€í•˜ê²Œ ê²°í•©ë˜ê³  ë‹¨ì¼ ì„œë¹„ìŠ¤ë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•œ í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•œ ìˆ˜ìš”ê°€ ê¸‰ì¦í•˜ë©´ **í•´ë‹¹ ì•„í‚¤í…ì²˜ ì „ì²´ë¥¼ í™•ì¥**í•´ì•¼ í•¨

#### 1.5.4 ë¶ˆë³€ ì¸í”„ë¼

![ë¶ˆë³€ ì¸í”„ë¼ ê°œë…](/assets/Images/10.Kubernetes/image%203.png)

*ë¶ˆë³€ ì¸í”„ë¼ì˜ ê°œë…ê³¼ ì¥ì *

- ë¶ˆë³€ ì¸í”„ë¼ëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í˜¸ìŠ¤íŒ…í•˜ëŠ” ì„œë²„ê°€ **ë°°í¬ í›„ì—ë„ ë³€ê²½ë˜ì§€ ì•Šì€ ìƒíƒœë¡œ ìœ ì§€**ëœë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸
- ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ ì¸í”„ë¼ëŠ” **ìˆ˜ë™ ì—…ê·¸ë ˆì´ë“œë¥¼ í”¼í•¨**ìœ¼ë¡œì¨ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ë°°í¬ í”„ë¡œì„¸ìŠ¤ì˜ **ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ë†’ì„**

![ë¶ˆë³€ ì¸í”„ë¼ vs ê°€ë³€ ì¸í”„ë¼](/assets/Images/10.Kubernetes/image%204.png)

*ê°€ë³€ ì¸í”„ë¼ì™€ ë¶ˆë³€ ì¸í”„ë¼ì˜ ì°¨ì´ì *

#### 1.5.5 ì„ ì–¸í˜•(Declarative) API

![ì„ ì–¸í˜• vs ëª…ë ¹í˜•](/assets/Images/10.Kubernetes/image%205.png)

*ì„ ì–¸í˜•ê³¼ ëª…ë ¹í˜• ì ‘ê·¼ë²•ì˜ ì°¨ì´*

##### ëª…ë ¹í˜•(Imperative) ì ‘ê·¼ë²•
- ì›í•˜ëŠ” ìƒíƒœë¥¼ ë§Œë“¤ê¸° ìœ„í•´ **í•„ìš”í•œ ë™ì‘ì„ ì§€ì‹œ**í•˜ëŠ” ë°©ì‹
- **"ìš”êµ¬ë˜ëŠ” í™˜ê²½ì„ ì–´ë–»ê²Œ(how) ë§Œë“¤ ê²ƒì¸ê°€"**ì— ì´ˆì ì„ ë‘ 

##### ì„ ì–¸í˜•(Declarative) ì ‘ê·¼ë²•
- **ì›í•˜ëŠ” ìƒíƒœ ê·¸ ìì²´ë¥¼ ì„ ì–¸**í•˜ëŠ” ë°©ì‹
- **"ìš”êµ¬ë˜ëŠ” í™˜ê²½ì´ ë¬´ì—‡ì¸ê°€(what)"**ì— ì´ˆì ì„ ë‘ 

### 1.6 ì¼ë°˜ì ì¸ í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê°œë°œ ë°©ì‹

#### 1.6.1 ì§€ì†ì  í†µí•©(CI)
- ê°œë°œìê°€ ì˜¤ë¥˜ ì—†ì´ **ìì£¼ ë³€ê²½ ì‚¬í•­ì„ ê³µìœ  ì½”ë“œ ë² ì´ìŠ¤ì— í†µí•©**í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë°©ì‹
- ì†Œê·œëª¨ë¡œ ìì£¼ ë³€ê²½í•˜ë©´ ë¬¸ì œë¥¼ ë” ë¹ ë¥´ê²Œ ì‹ë³„í•˜ê³  í•´ê²°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ **ê°œë°œ íš¨ìœ¨ì„±ì´ ë†’ì•„ì§**
- CI ë„êµ¬ëŠ” ë³€ê²½ ì‚¬í•­ì´ ìˆì„ ë•Œë§ˆë‹¤ **ì½”ë“œ í’ˆì§ˆì„ ìë™ìœ¼ë¡œ í‰ê°€**í•˜ë¯€ë¡œ ê°œë°œ íŒ€ì´ ë³´ë‹¤ ë†’ì€ ì‹ ë¢°ë„ë¡œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ

#### 1.6.2 ì§€ì†ì  ì „ë‹¬(CD)
- í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê°œë°œì„ ì§€ì›í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ë°©ì‹
- ê°œë°œ íŒ€ì€ CDë¥¼ ì‚¬ìš©í•˜ì—¬ **ì–¸ì œë“  ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ í´ë¼ìš°ë“œì— ë°°í¬**í•  ìˆ˜ ìˆìŒ
- ì†Œí”„íŠ¸ì›¨ì–´ ìë™í™” ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ ê¸°ëŠ¥ì„ ë„ì…í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ëŠ” ë“±ì˜ **ë³€ê²½ì— ë”°ë¥¸ ìœ„í—˜ì„ ì¤„ì„**
- CIì™€ CDëŠ” ìœ ê¸°ì ìœ¼ë¡œ ì‘ë™í•˜ë©° **íš¨ìœ¨ì ì¸ ì†Œí”„íŠ¸ì›¨ì–´ ì œê³µì„ ì§€ì›**

#### 1.6.3 DevOps
- **ê°œë°œ ë° ìš´ì˜ íŒ€ì˜ í˜‘ì—…ì„ ê°œì„ **í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë¬¸í™”
- ì´ëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ëª¨ë¸ì— ë¶€í•©í•˜ëŠ” ì„¤ê³„ ì² í•™
- DevOps ë°©ì‹ì„ í†µí•´ ì¡°ì§ì€ **ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìˆ˜ëª… ì£¼ê¸°ë¥¼ ë‹¨ì¶•**
- ê°œë°œìì™€ ìš´ì˜ ì—”ì§€ë‹ˆì–´ëŠ” DevOps ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ **í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ê°œë°œì„ ìë™í™”**

#### 1.6.4 ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ…
- ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ…ì€ **í´ë¼ìš°ë“œ ì œê³µì—…ì²´ê°€ ê¸°ë°˜ ì„œë²„ ì¸í”„ë¼ë¥¼ ì „ì ìœ¼ë¡œ ê´€ë¦¬**í•˜ëŠ” í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ëª¨ë¸
- í´ë¼ìš°ë“œ ì¸í”„ë¼ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ **ìë™ìœ¼ë¡œ í™•ì¥ ë° êµ¬ì„±**ë˜ê¸° ë•Œë¬¸ì— ê°œë°œìëŠ” ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ…ì„ í™œìš©
- ê°œë°œìëŠ” **ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì‚¬ìš©ë˜ëŠ” ë¦¬ì†ŒìŠ¤ì— ëŒ€í•´ì„œë§Œ ë¹„ìš©ì„ ì§€ë¶ˆ**
- ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ëŠ” **ì•± ì‹¤í–‰ì´ ì¤‘ì§€ë˜ë©´ ìë™ìœ¼ë¡œ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ ì œê±°**

### 1.7 ì»¨í…Œì´ë„ˆ ì‘ë™ ì›ë¦¬

#### 1.7.1 chroot
- íŠ¹ì • ë””ë ‰í„°ë¦¬ë¥¼ **ìµœìƒìœ„ ë””ë ‰í„°ë¦¬ rootë¡œ ì¸ì‹**í•˜ê²Œë” ì„¤ì •í•˜ëŠ” ë¦¬ëˆ…ìŠ¤ ê¸°ìˆ (ëª…ë ¹)
- íŒŒì¼ì„ ë¶„ë¦¬(ê²©ë¦¬)í•˜ì—¬ ë…ë¦½ê³µê°„ì„ ìƒì„±. ìƒˆë¡œìš´ ê°€ìƒ root ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±. **'chroot jail'**

#### 1.7.2 unshare
- **ë„¤ì„ìŠ¤í˜ì´ìŠ¤(namespaces)**ë¥¼ ì´ìš©í•˜ì—¬ **í”„ë¡œì„¸ìŠ¤ê°„ ê²©ë¦¬(isolation)**ë¥¼ ì œê³µ
- ë‹¤ìŒê³¼ ê°™ì´ ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì œê³µ

#### 1.7.3 cgroups
- **CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬ I/O, ë„¤íŠ¸ì›Œí¬ ë“±ì˜ ìì› ì‚¬ìš©ëŸ‰ ì œì–´**, íŠ¹ì • ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê³¼ë„í•œ ìì› ì‚¬ìš©ì„ ì œí•œí•˜ëŠ” ê¸°ëŠ¥
- ê²©ë¦¬ëœ ê³µê°„ì—ì„œ ìì›ì„ ì œì–´í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ìœ¼ë¡œ **CPU, memory ë“± ìì› ì‚¬ìš©ë¥ ì„ í• ë‹¹í•˜ê³  ì œí•œ**

---

## 2. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì´í•´

### 2.1 ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì˜ í•„ìš”ì„±(í´ëŸ¬ìŠ¤í„°ë§)

![ì»¨í…Œì´ë„ˆ í´ëŸ¬ìŠ¤í„°ë§](/assets/Images/10.Kubernetes/image%206.png)

*ì»¨í…Œì´ë„ˆ í´ëŸ¬ìŠ¤í„°ë§ì„ í†µí•œ ê³ ê°€ìš©ì„± êµ¬í˜„*

- **node1ì´ ì£½ì–´ë„, node2ì™€ node3ì—ì„œ ì‘ë™í•  ìˆ˜ ìˆìŒ**(ê³ ê°€ìš©ì„±)
- **í™•ì¥ì„± + ê´€ë¦¬ ìš©ì´ì„±**

### 2.2 ì»¨í…Œì´ë„ˆì˜ ê³„ì¸µ êµ¬ì¡°

![ì»¨í…Œì´ë„ˆ ê³„ì¸µ êµ¬ì¡°](/assets/Images/10.Kubernetes/image%207.png)

*ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì˜ ê³„ì¸µì  êµ¬ì¡°*

### 2.3 ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì†Œê°œ

- í‚¤ì¡ì´(helmsman)ë‚˜ íŒŒì¼ëŸ¿(pilot)ì„ ëœ»í•˜ëŠ” ê·¸ë¦¬ìŠ¤ì–´ **ÎºÏ…Î²ÎµÏÎ½Î®Ï„Î·Ï‚**ì—ì„œ ìœ ë˜
- **ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°**(ì‹¤í–‰ ë° ê´€ë¦¬)
- **Container Cluster Manager**
- ë‹¤ì–‘í•œ í´ë¼ìš°ë“œ ë° ë² ì–´ë©”íƒˆ í™˜ê²½ ì§€ì›
- **Kubernetes is all about decoupled(ë¶„ë¦¬ëœ), transient(ì¼ì‹œì ì¸, ì§€ì†ë˜ì§€ ì•ŠëŠ”) services.**

### 2.4 ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê¸°ëŠ¥

#### 2.4.1 Automated rollouts and rollbacks (ìë™í™”ëœ ë¡¤ì•„ì›ƒê³¼ ë¡¤ë°±)
- ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„¤ì • ë³€ê²½ì‹œ **ì ì§„ì ìœ¼ë¡œ ë¡¤ì•„ì›ƒ**
- ë‹¨, ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ëª¨ë‹ˆí„°ë§í•´ì„œ **ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ê°€ ë™ì‹œì— ì¢…ë£Œë˜ì§€ ì•Šë„ë¡ ë³´ì¥**
- ë§Œì•½ ì–´ë–¤ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” **ë³€ê²½ ì‚¬í•­ì„ ë¡¤ë°±**
- **ì„±ì¥í•˜ëŠ” ë””í”Œë¡œì´ë¨¼íŠ¸(Deployments) ì†”ë£¨ì…˜ ìƒíƒœê³„ë¥¼ ì´ìš©**

#### 2.4.2 Service discovery and load balancing (ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì™€ ë¡œë“œ ë°¸ëŸ°ì‹±)
- ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ **ìµìˆ™í•˜ì§€ ì•Šì€ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ìŒ**
- ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” **íŒŒë“œì—ê²Œ ê³ ìœ í•œ IP ì£¼ì†Œì™€ íŒŒë“œ ì§‘í•©ì— ëŒ€í•œ ë‹¨ì¼ DNS ëª…ì„ ë¶€ì—¬**í•˜ê³ , ê·¸ê²ƒë“¤ ê°„ì— **ë¡œë“œ-ë°¸ëŸ°ìŠ¤ë¥¼ ìˆ˜í–‰**í•  ìˆ˜ ìˆìŒ

#### 2.4.3 Storage orchestration (ìŠ¤í† ë¦¬ì§€ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜)
- ë¡œì»¬ ìŠ¤í† ë¦¬ì§€, AWSë‚˜ GCPì™€ ê°™ì€ í¼ë¸”ë¦­ í´ë¼ìš°ë“œ ê³µê¸‰ì ë˜ëŠ” NFS, iSCSI, Ceph, Cinderì™€ ê°™ì€ ë„¤íŠ¸ì›Œí¬ ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œì—ì„œ **ì›í•˜ëŠ” ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œì„ ìë™ìœ¼ë¡œ ë§ˆìš´íŠ¸**

#### 2.4.4 Self-healing (ìê°€ ì¹˜ìœ )
- **ì‹¤íŒ¨í•œ ì»¨í…Œì´ë„ˆë¥¼ ì¬ì‹œì‘**í•˜ê³ , ë…¸ë“œê°€ ì£½ëŠ” ê²½ìš° **ì»¨í…Œì´ë„ˆë“¤ì„ êµì²´í•˜ê¸° ìœ„í•´ ë‹¤ì‹œ ìŠ¤ì¼€ì¤„ë§**
- ì‚¬ìš©ìê°€ ì •ì˜í•œ ìƒíƒœ ì²´í¬ì— ì‘ë‹µí•˜ì§€ ì•ŠëŠ” ì»¨í…Œì´ë„ˆë“¤ì„ ì¢…ë£Œì‹œí‚¤ë©°, **ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•  ì¤€ë¹„ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ í•´ë‹¹ ì»¨í…Œì´ë„ˆë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë¦¬ì§€ ì•ŠìŒ**

#### 2.4.5 Secret and configuration management (ì‹œí¬ë¦¿ê³¼ êµ¬ì„± ê´€ë¦¬)
- **ì‚¬ìš©ìì˜ ì´ë¯¸ì§€ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•˜ê±°ë‚˜ ìŠ¤íƒ êµ¬ì„±ì˜ ì‹œí¬ë¦¿ì„ ë…¸ì¶œí•˜ì§€ ì•Šê³ ** ì‹œí¬ë¦¿ê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì„±ì„ ë°°í¬í•˜ê³  ì—…ë°ì´íŠ¸

#### 2.4.6 Automatic bin packing (ìë™ ë¹ˆ íŒ¨í‚¹)
- ë¦¬ì†ŒìŠ¤ ìš”êµ¬ ì‚¬í•­ê³¼ ê¸°íƒ€ ì œì•½ ì¡°ê±´ì— ë”°ë¼ **ì»¨í…Œì´ë„ˆë¥¼ ìë™ìœ¼ë¡œ ë°°ì¹˜**í•˜ì§€ë§Œ, ê°€ìš©ì„±ì€ ê·¸ëŒ€ë¡œ ìœ ì§€
- í™œìš©ë„ë¥¼ ë†’ì´ê³  ë” ë§ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì ˆì•½í•˜ê¸° ìœ„í•´ **ì¤‘ìš”í•œ(critical) ì›Œí¬ë¡œë“œì™€ ìµœì„ ì˜(best-effort) ì›Œí¬ë¡œë“œë¥¼ í˜¼í•©**

#### 2.4.7 Batch execution (ë°°ì¹˜ ì‹¤í–‰)
- ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì„œë¹„ìŠ¤ ì™¸ì—ë„ **ë°°ì¹˜(batch)ì™€ CI ì›Œí¬ë¡œë“œë¥¼ ê´€ë¦¬**í•  ìˆ˜ ìˆìœ¼ë©°, ì›í•˜ëŠ” ê²½ìš° ì‹¤íŒ¨í•œ ì»¨í…Œì´ë„ˆë¥¼ êµì²´í•  ìˆ˜ ìˆìŒ

#### 2.4.8 Horizontal scaling (Horizontal ìŠ¤ì¼€ì¼ë§)
- **ê°„ë‹¨í•œ ëª…ë ¹ì–´ë‚˜ UIë¥¼ í†µí•´ì„œ ë˜ëŠ” CPU ì‚¬ìš©ëŸ‰ì— ë”°ë¼ ìë™ìœ¼ë¡œ** ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìŠ¤ì¼€ì¼ì„ ì—… ë˜ëŠ” ë‹¤ìš´

#### 2.4.9 IPv4/IPv6 dual-stack (IPv4/IPv6 ì´ì¤‘ ìŠ¤íƒ)
- **íŒŒë“œì™€ ì„œë¹„ìŠ¤ì— IPv4ì™€ IPv6 ì£¼ì†Œ í• ë‹¹**

#### 2.4.10 Designed for extensibility (í™•ì¥ì„±ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ë¨)
- **ì¿ ë²„ë„¤í‹°ìŠ¤ ì—…ìŠ¤íŠ¸ë¦¼ ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì • ì—†ì´** ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŒ

### 2.5 ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„° ì•„í‚¤í…ì²˜

![ì¿ ë²„ë„¤í‹°ìŠ¤ ì•„í‚¤í…ì²˜](/assets/Images/10.Kubernetes/image%208.png)

*ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ì „ì²´ ì•„í‚¤í…ì²˜*

#### 2.5.1 kube-api-server
- **ëª¨ë“  í´ëŸ¬ìŠ¤í„° í†µì‹ ì˜ ì¤‘ì‹¬**
- **REST API ì œê³µ**
- í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ëª…ë ¹ì–´, ë¦¬ì†ŒìŠ¤ ê´€ë¦¬, ì¸ì¦, ê¶Œí•œ í™•ì¸
- **kubectl**, ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ë“¤ì´ API Serverë¥¼ í†µí•´ í†µì‹ 

#### 2.5.2 etcd
- **ì¼ê´€ë˜ê³  ê°€ìš©ì„±ì´ ë†’ì€ í‚¤ ê°’ ì €ì¥ì†Œ**ë¡œ ëª¨ë“  í´ëŸ¬ìŠ¤í„° ë°ì´í„°ì— ëŒ€í•œ Kubernetesì˜ ë°±ì—… ì €ì¥ì†Œë¡œ ì‚¬ìš©
- Kubernetes í´ëŸ¬ìŠ¤í„°ì—ì„œ etcdë¥¼ ë°±ì—… ì €ì¥ì†Œë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° **ë°ì´í„°ì— ëŒ€í•œ ë°±ì—… ê³„íšì´ ìˆëŠ”ì§€ í™•ì¸** í•„ìš”

#### 2.5.3 scheduler
- [ë…¸ë“œ](https://kubernetes.io/ko/docs/concepts/architecture/nodes/)ê°€ ë°°ì •ë˜ì§€ ì•Šì€ ìƒˆë¡œ ìƒì„±ëœ [íŒŒë“œ](https://kubernetes.io/ko/docs/concepts/workloads/pods/)ë¥¼ ê°ì§€í•˜ê³ , **ì‹¤í–‰í•  ë…¸ë“œë¥¼ ì„ íƒ**í•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸
- ìŠ¤ì¼€ì¤„ë§ ê²°ì •ì„ ìœ„í•´ì„œ ê³ ë ¤ë˜ëŠ” ìš”ì†ŒëŠ” **ë¦¬ì†ŒìŠ¤ì— ëŒ€í•œ ê°œë³„ ë° ì´ì²´ì  ìš”êµ¬ ì‚¬í•­, í•˜ë“œì›¨ì–´/ì†Œí”„íŠ¸ì›¨ì–´/ì •ì±…ì  ì œì•½, ì–´í”¼ë‹ˆí‹°(affinity) ë° ì•ˆí‹°-ì–´í”¼ë‹ˆí‹°(anti-affinity) ëª…ì„¸, ë°ì´í„° ì§€ì—­ì„±, ì›Œí¬ë¡œë“œ-ê°„ ê°„ì„­, ë°ë“œë¼ì¸**ì„ í¬í•¨

#### 2.5.4 kube-controller-manager
- [ì»¨íŠ¸ë¡¤ëŸ¬](https://kubernetes.io/ko/docs/concepts/architecture/controller/) í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì»´í¬ë„ŒíŠ¸
- ë…¼ë¦¬ì ìœ¼ë¡œ, ê° [ì»¨íŠ¸ë¡¤ëŸ¬](https://kubernetes.io/ko/docs/concepts/architecture/controller/)ëŠ” ë¶„ë¦¬ëœ í”„ë¡œì„¸ìŠ¤ì´ì§€ë§Œ, **ë³µì¡ì„±ì„ ë‚®ì¶”ê¸° ìœ„í•´ ëª¨ë‘ ë‹¨ì¼ ë°”ì´ë„ˆë¦¬ë¡œ ì»´íŒŒì¼ë˜ê³  ë‹¨ì¼ í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ì‹¤í–‰**

#### 2.5.5 kubelet
- **Nodeì˜ ì—ì´ì „íŠ¸**
- **Podë“¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ë©°, ì •ìƒ ë™ì‘í•˜ê²Œ ê´€ë¦¬**

#### 2.5.6 kube-proxy
- **ì„œë¹„ìŠ¤ ë„¤íŠ¸ì›Œí‚¹ ì²˜ë¦¬**
- **í´ëŸ¬ìŠ¤í„° ë‚´ë¶€/ì™¸ë¶€ íŠ¸ë˜í”½ ë¼ìš°íŒ…**
- **iptables ë˜ëŠ” IPVSë¥¼ ì´ìš©í•´ Service -> Pod íŠ¸ë˜í”½ ê´€ë¦¬**

> ğŸ“– **ì°¸ê³  ìë£Œ**: [Kubernetes ì»´í¬ë„ŒíŠ¸ ê³µì‹ ë¬¸ì„œ](https://kubernetes.io/ko/docs/concepts/overview/components/)

### 2.6 ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ìƒëª… ì£¼ê¸°

![ì¿ ë²„ë„¤í‹°ìŠ¤ ë¼ì´í”„ì‚¬ì´í´](/assets/Images/10.Kubernetes/image%209.png)

*ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ Pod ìƒì„±ë¶€í„° ì‹¤í–‰ê¹Œì§€ì˜ ì „ì²´ í”„ë¡œì„¸ìŠ¤*

1. **ì‚¬ìš©ìëŠ” API ì„œë²„ë¥¼ í†µí•´ Podë¥¼ ìƒì„±**í•˜ê³  API ì„œë²„ëŠ” ì´ë¥¼ etcdì— ì”ë‹ˆë‹¤.
2. **ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” 'ê²°í•© í•´ì œëœ(ì–¸ë°”ì¸ë”©)' Podë¥¼ ë°œê²¬**í•˜ê³  í•´ë‹¹ Podë¥¼ ì‹¤í–‰í•  Nodeë¥¼ ê²°ì •í•©ë‹ˆë‹¤. í•´ë‹¹ ê²°í•©(ë°”ì¸ë”©)ì„ API ì„œë²„ì— ë‹¤ì‹œ ê¸°ë¡í•©ë‹ˆë‹¤.
3. **Kubeletì€ í•´ë‹¹ Nodeì— ê²°í•©(ë°”ì¸ë”©) ëœ Pod ì§‘í•©ì˜ ë³€ê²½ ì‚¬í•­ì„ ê°ì§€**í•©ë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(ì˜ˆ: Docker)ì„ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
4. **Kubeletì€ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„(ì˜ˆ:Docker)ì„ í†µí•´ Pod ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§**í•©ë‹ˆë‹¤. ìƒí™©ì´ ë³€ê²½ë˜ë©´ Kubeletì€ í˜„ì¬ ìƒíƒœë¥¼ API ì„œë²„ì— ë‹¤ì‹œ ë°˜ì˜í•©ë‹ˆë‹¤.

---

## 3. ì¿ ë²„ë„¤í‹°ìŠ¤ ì„¤ì¹˜

### 3.1 Kubernetes ì„¤ì¹˜ ì˜µì…˜

#### 3.1.1 ë‹¤ì–‘í•œ ì„¤ì¹˜ ë°©ë²•
- **Minikube** (It is a single node kubernetes cluster)
- **kops** (Multi node kubernetes setup into AWS)
  - ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ìë™ í”„ë¡œë¹„ì €ë‹ì„ ìœ„í•œ CLI tool
  - Kubernetes í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ AWS ì „ìš©ë„êµ¬ì—ì„œ êµ¬ê¸€ í´ë¼ìš°ë“œ ì§€ì›, other
- **Kubespray**
  - on-premises ë² ì–´ ë©”íƒˆ ì„œë²„ì— ì„¤ì¹˜í•˜ëŠ” ì¤‘ì ì„ ë‘ 
  - ê³ ê°€ìš©ì„±ê³¼ ë‹¤ì¤‘ í”Œë«í¼ì„ ì§€ì›
- **Kubeadm** (Multi Node Cluster in our on-premises)
- **Puppet Kubernetes Module**

### 3.2 ë¦¬ëˆ…ìŠ¤ í™˜ê²½ êµ¬ì¶• (VMware)

#### 3.2.1 VMWare, Ubuntu ì„¤ì¹˜
- [VMWare Workstation Pro](https://blogs.vmware.com/workstation/2024/05/vmware-workstation-pro-now-available-free-for-personal-use.html)
- [ubuntu ì„¤ì¹˜](https://ubuntu.com/download/alternative-downloads)

#### 3.2.2 íŒŒì¼ì˜ ë¬´ê²°ì„± ê²€ì¦ (iso íŒŒì¼)
```bash
Get-FileHash ubuntu-<version>-amd64.iso
cat SHA256SUMS.txt
```

#### 3.2.3 VMware Workstation Pro ì„¤ì¹˜ ë° í™˜ê²½ êµ¬ì„±
- Subnet IP: 10.0.2.0
- Subnet mask: 255.255.255.0
- NAT Settings â†’ Gateway IP 10.0.2.2
- DHCP Settings â†’ 10.0.2.128 ~ 10.0.2.254

![VMware ë„¤íŠ¸ì›Œí¬ ì„¤ì •](/assets/Images/10.Kubernetes/image%2010.png)

*VMware ë„¤íŠ¸ì›Œí¬ ì„¤ì • í™”ë©´*

#### 3.2.4 Ubuntu ìš´ì˜ì²´ì œ ì„¤ì¹˜
1. English â†’ Install Ubuntu
2. Keyboard layout : English(US) â†’ Continue
3. Update and other software: Minimal installation â†’ Continue
   - Check [Download updates while installing Ubuntu] (ê¸°ë³¸ê°’)
4. Installation type: Erase disk and install Ubuntu â†’ Install Now
   - [ Write the changes to disks? â†’ [Continue] ]
5. Where are you? Seoul â†’ Continue
   - Your name : ubuntu
   - Choose a password: @!ubuntu#1
   - Select [Require my password to login] (ê¸°ë³¸ê°’)
   - Continue
6. ì„¤ì¹˜ ì™„ë£Œ í›„ [Restart Now]

#### 3.2.5 ë¡œê·¸ì¸ (GUI) ë° ë„¤íŠ¸ì›Œí¬ êµ¬ì„±
1. ì˜¤ë¥¸ìª½ ìƒë‹¨ ë„¤íŠ¸ì›Œí¬ ì•„ì´ì½˜ í´ë¦­ â†’ [Settings] ì„ íƒ
   - Network : Wired ì„¤ì • ì•„ì´ì½˜ì˜ **ìš°ì¸¡ í†±ë‹ˆë°”í€´** í´ë¦­
   - IPv4 íƒ­ ì„ íƒ > Manual ì„ íƒ
     - IP address: 10.0.2.10
     - Netmask: 24
     - Gateway: 10.0.2.2
     - DNS server: 168.126.63.1, 8.8.8.8
   - ìš°ì¸¡ ìƒë‹¨ì˜ [Apply]
   - IPv6 > Disable > Apply
2. Wired - Connected ë„¤íŠ¸ì›Œí¬ ë²„íŠ¼ì„ ì´ìš©í•˜ì—¬, ë””ë°”ì´ìŠ¤ë¥¼ ê»ë‹¤ ì¼œê¸°
3. Network ì„¤ì • ì°½ ë‹«ê¸°

#### 3.2.6 ì‹œìŠ¤í…œ ê¸°ë³¸ ìš´ì˜ êµ¬ì„±
1. ë°”íƒ•í™”ë©´ ë§ˆìš°ìŠ¤ ìš°í´ë¦­ â†’ Open in Terminal
   ```bash
   $ sudo -i
   [sudo] password for ubuntu: @!ubuntu#1
   ```

2. root íŒ¨ìŠ¤ì›Œë“œ ì„¤ì • (@!root#1)
   ```bash
   # passwd root
   ```

3. ssh-server ë° ê¸°ë³¸ íŒ¨í‚¤ì§€ ì„¤ì¹˜
   ```bash
   # apt update
   # apt install openssh-server openssh-client -y
   # systemctl enable --now ssh
   # apt install vim tree wget git bash-completion iputils-ping network-manager -y
   ```

4. hostname ë³€ê²½
   ```bash
   # hostnamectl hostname k8s-master
   ```

5. TEXT login êµ¬ì„± ([ì°¸ê³ ](https://www.cyberciti.biz/faq/switch-boot-target-to-text-gui-in-systemd-linux/)) - multi-user.target / graphical.target
   ```bash
   # systemctl get-default
   # systemctl set-default multi-user.target
   # systemctl isolate multi-user.target
   ```

6. TEXT ë¡œê·¸ì¸
   ```bash
   login: ubuntu
   password: @!ubuntu#1
   ```

#### 3.2.7 ê°€ìƒë¨¸ì‹  snapshot & clone
1. [k8s-master] ì—ì„œ ë§ˆìš°ìŠ¤ ìš°ì¸¡ ë²„íŠ¼ í´ë¦­ â†’ [ Snapshot ] â†’ [ Take Snapshot ]
   - Name: Installation complete
   - Description:
     - ip: 10.0.2.10
     - remote login ID:
     - root / @!root#1
     - ubuntu / @!ubuntu#1

2. Clone : ê°€ìƒ ë¨¸ì‹  ë³µì œ
   - ì¢Œì¸¡ì˜ k8s-master ì„ íƒ í›„ [VM] - [ Manage ] - [ Clone ]
   - [Next] - Clone from [An existing snapshot (power off only)
     - [Installation complete] ì„ íƒ - [Next]
   - Clone method ì—ì„œ [Create a full clone] ì„ íƒ - [Next]
   - Virtual machine name: k8s-worker1
   - [Finish] ë¥¼ ì„ íƒí•˜ì—¬ k8s-masterë¥¼ k8s-worker1 ìœ¼ë¡œ ë³µì œ(Full Clone) - [Close]
   - (ì„ íƒ) ë…¸íŠ¸ë¶ ë“± RAMì´ 16GB ì´í•˜ì¸ ê²½ìš° workerì˜ ë©”ëª¨ë¦¬ë¥¼ 2GBë¡œ ë³€ê²½

3. ë³µì œëœ k8s-worker1 ì‹¤í–‰ í›„ ubuntu ê³„ì • ë¡œê·¸ì¸
   - username: ubuntu, password: @!ubuntu#1
   ```bash
   $ sudo -i
   # nmtui
   ```
   - [Edit a connection] â†’ Wired connection 1 â†’ [Editâ€¦] í´ë¦­
   - IPv4 CONFIGURATION
     - Address: 10.0.2.11/24
     - Gateway: 10.0.2.2
     - DNS servers: 168.126.63.1, 8.8.8.8 â†’ <OK>
   - Wired connection 1 êµ¬ì„± ë©”ë‰´ì—ì„œ <Back> í´ë¦­
   - [Activate a connection] í´ë¦­ìœ¼ë¡œ ì•ì„œ ì„¤ì •í•œ ë„¤íŠ¸ì›Œí¬ ë¹„í™œì„±í™”/í™œì„±í™” â†’ <Back>
   - [Set system hostname] í´ë¦­ í›„ í˜¸ìŠ¤íŠ¸ ì´ë¦„ : k8s-worker1
   - [Quit] ì„ íƒ
   - ì‹œìŠ¤í…œ ë¦¬ë¶€íŒ…: # reboot í›„ MobaXterm ì›ê²© ë¡œê·¸ì¸

### 3.3 ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ êµ¬ì¶• (ê³µí†µ)

#### 3.3.1 í‘œì¤€ ì‹œê°„ëŒ€ ë³€ê²½(ì„ íƒ)
- í‘œì¤€ ì‹œê°„ëŒ€ í™•ì¸: master, worker1, worker2
  ```bash
  # timedatectl
  # Time zone: Asia/Seoul (KST, +0900) ë˜ì–´ ìˆìœ¼ë©´ ë³€ê²½í•  í•„ìš” ì—†ìŒ
  ```
- í‘œì¤€ ì‹œê°„ëŒ€ ë³€ê²½ : master, worker1, worker2
  ```bash
  # timedatectl list-timezones | grep Seoul
  # timedatectl set-timezone Asia/Seoul
  # timedatectl
  # Time zone: Asia/Seoul (KST, +0900) ë˜ì–´ ìˆì–´ì•¼ í•¨
  ```

> ğŸ“– **ì°¸ê³ ìë£Œ**: [Amazon Linuxì˜ í‘œì¤€ ì‹œê°„ëŒ€ ë³€ê²½](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/set-time.html#change_time_zone)

#### 3.3.2 í˜¸ìŠ¤íŠ¸ ì„¤ì •
- í˜¸ìŠ¤íŠ¸ ì´ë¦„ ë³€ê²½ : k8s-master, k8s-worker1, k8s-worker2
  ```bash
  # hostnamectl hostname k8s-master
  # hostnamectl hostname k8s-worker1
  # hostnamectl hostname k8s-worker2
  ```

- hosts ì„¤ì • : k8s-master, k8s-worker1, k8s-worker2
  ```bash
  # ip addr
  # vi /etc/hosts
  
  10.0.2.10 k8s-master
  10.0.2.11 k8s-worker1
  10.0.2.12 k8s-worker2
  ```

#### 3.3.3 ë…¸ë“œ í…ŒìŠ¤íŠ¸
- ping test : k8s-master(control plane), k8s-worker1, k8s-worker2
  ```bash
  # ping -c 1 k8s-master
  # ping -c 1 k8s-worker1
  # ping -c 1 k8s-worker2
  ```

#### 3.3.4 Kubernetes ì„¤ì¹˜ ë„êµ¬ - kubeadm
- Kubernetes ê³µì‹ ì„¤ì¹˜ ë„êµ¬ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì‹¤ìŠµì—ì„œëŠ” **kubeadm**ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë´…ë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ì§€ì›í•˜ëŠ” ë…ë¦½ ë„êµ¬ë¡œì„œ Kubernetes í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ëŠ” ê¸°ë³¸ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
- ìì²´ ì¥ë¹„ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ëª¨ë“  ë…¸ë“œì—ì„œ **ìŠ¤ì™‘ì„ ë¹„í™œì„±í™”(disable swap)**í•˜ê³  **ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ê°€ í•˜ë‚˜ë§Œ ìˆëŠ”ì§€**(only one network interface) í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ì¸í„°í˜ì´ìŠ¤ê°€ ì§€ì›ë˜ì§€ë§Œ ì¶”ê°€ êµ¬ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤. **kubeadm** ëª…ë ¹ì„ ì‚¬ìš©í•  ë•Œ ê²½ê³  ë˜ëŠ” ì˜¤ë¥˜ë¡œ í‘œì‹œë˜ëŠ” ë‹¤ë¥¸ ìš”êµ¬ ì‚¬í•­ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ëª…ë ¹ì€ ì¼ë°˜ ì‚¬ìš©ìë¡œ ì‹¤í–‰ë˜ì§€ë§Œ ë£¨íŠ¸ ê¶Œí•œì´ í•„ìš”í•œ ëª…ë ¹ë„ ìˆìŠµë‹ˆë‹¤.

> âš ï¸ **ë§¤ìš° ì¤‘ìš”**: Kubernetesë¥¼ í•™ìŠµí•˜ëŠ” ë™ì•ˆ ë°©í™”ë²½ì„ ë¹„í™œì„±í™”í•˜ì‹­ì‹œì˜¤. êµ¬ì„± ìš”ì†Œ ê°„ í†µì‹ ì— í•„ìš”í•œ í¬íŠ¸ ëª©ë¡ì´ ìˆì§€ë§Œ ëª©ë¡ì´ í•„ìš”í•œë§Œí¼ ì™„ì „í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 3.3.5 Install Kubernetes

1. **íŒ¨í‚¤ì§€ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ë° ì—…ê·¸ë ˆì´ë“œ ì‹¤í–‰**
   ```bash
   ubuntu@k8s-master:~$ sudo -i
   root@k8s-master:~# apt-get update && apt-get upgrade -y
   root@k8s-master:~# apt-get install -y vim
   
   # ì˜¤ë¥˜ë°œìƒì‹œ
   root@k8s-master:~# sudo rm -rf /var/lib/apt/lists/*
   root@k8s-master:~# sudo apt-get clean
   root@k8s-master:~# sudo apt-get update
   ```

2. **ì¢…ì†ì„±ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì„¤ì¹˜í•´ì•¼ í•˜ëŠ” ì—¬ëŸ¬ íŒ¨í‚¤ì§€**
   ```bash
   root@k8s-master:~# apt install curl apt-transport-https git wget \
   software-properties-common lsb-release ca-certificates -y
   ```

3. **ìŠ¤ì™‘ì„ ë¹„í™œì„±í™”**
   ```bash
   root@k8s-master:~# swapoff -a
   # /etc/fstab ë„ í™•ì¸ ë˜ëŠ” 
   # sed -i '/swap/s/^/#/' /etc/fstab
   ```

4. **ëª¨ë“ˆì„ ë¡œë“œí•˜ì—¬ ë‹¤ìŒ ë‹¨ê³„ì— ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸**
   ```bash
   root@k8s-master:~# cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
   overlay
   br_netfilter
   EOF
   # cat /etc/modules-load.d/k8s.conf
   
   root@k8s-master:~# modprobe overlay
   root@k8s-master:~# modprobe br_netfilter
   # lsmod | grep overlay
   # lsmod | grep br_netfilter
   ```

5. **í•„ìš”í•œ íŠ¸ë˜í”½ì„ í—ˆìš©í•˜ë„ë¡ ì»¤ë„ ë„¤íŠ¸ì›Œí‚¹ì„ ì—…ë°ì´íŠ¸**
   ```bash
   # bridge traffic ë³´ê²Œ ì»¤ë„ íŒŒë¼ë¯¸í„° ìˆ˜ì •
   # í•„ìš”í•œ sysctl íŒŒë¼ë¯¸í„°ë¥¼ /etc/sysctl.d/conf íŒŒì¼ì— ì„¤ì •í•˜ë©´, ì¬ë¶€íŒ… í›„ì—ë„ ê°’ì´ ìœ ì§€ëœë‹¤.
   root@k8s-master:~# cat << EOF | tee /etc/sysctl.d/kubernetes.conf
   net.bridge.bridge-nf-call-ip6tables = 1
   net.bridge.bridge-nf-call-iptables = 1
   net.ipv4.ip_forward = 1
   EOF
   # cat /etc/sysctl.d/kubernetes.conf
   ```

6. **ë³€ê²½ ì‚¬í•­ì´ í˜„ì¬ ì»¤ë„ì—ì„œë„ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸(ì¬ë¶€íŒ…í•˜ì§€ ì•Šê³  sysctl íŒŒë¼ë¯¸í„° ì ìš©)**
   ```bash
   root@k8s-master:~# sysctl --system
   <output_omitted>
   * Applying /etc/sysctl.d/kubernetes.conf ...
   net.bridge.bridge-nf-call-ip6tables = 1
   net.bridge.bridge-nf-call-iptables = 1
   net.ipv4.ip_forward = 1
   * Applying /etc/sysctl.conf ...
   ```

7. **Dockerì˜ ê³µì‹ GPGí‚¤ë¥¼ ì‹œìŠ¤í…œì— ì¶”ê°€ / Docker repository URL ë“±ë¡**
   ```bash
   root@k8s-master:~# mkdir -p /etc/apt/keyrings
   root@k8s-master:~# curl -fsSL https://download.docker.com/linux/ubuntu/gpg \
   | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
   root@k8s-master:~# echo \
   "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] \
   https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
   ```

8. **ì»¨í…Œì´ë„ˆ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ì¹˜**
   ```bash
   root@k8s-master:~# apt-get update && apt-get install containerd.io -y
   root@k8s-master:~# containerd config default | tee /etc/containerd/config.toml
   root@k8s-master:~# sed -e 's/SystemdCgroup = false/SystemdCgroup = true/g' -i /etc/containerd/config.toml
   root@k8s-master:~# systemctl restart containerd
   ```

9. **Kubernetes íŒ¨í‚¤ì§€ ì €ì¥ì†Œì˜ ê³µê°œ ì„œëª… í‚¤ ë‹¤ìš´ë¡œë“œ**
   ```bash
   root@k8s-master:~# mkdir -p -m 755 /etc/apt/keyrings
   root@k8s-master:~# curl -fsSL https://pkgs.k8s.io/core:/stable:/v1.31/deb/Release.key \
   | sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg
   ```

10. **ì ì ˆí•œ Kubernetes apt ì €ì¥ì†Œë¥¼ ì¶”ê°€ (ì—¬ê¸°ì„œëŠ” 1.31 ì„ íƒ)**
    ```bash
    root@k8s-master:~# echo "deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] \
    https://pkgs.k8s.io/core:/stable:/v1.31/deb/ /" \
    | sudo tee /etc/apt/sources.list.d/kubernetes.list
    deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg]
    https://pkgs.k8s.io/core:/stable:/v1.31/deb/ /
    ```

11. **ì„ ì–¸ëœ ìƒˆ ì €ì¥ì†Œë¡œ ì—…ë°ì´íŠ¸**
    ```bash
    root@k8s-master:~# apt-get update
    ```

12. **Kubernetes ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì„¤ì¹˜**
    ```bash
    root@k8s-master:~# apt-get install -y kubeadm=1.31.1-1.1 kubelet=1.31.1-1.1 kubectl=1.31.1-1.1
    <output-omitted>
    
    root@k8s-master:~# apt-mark hold kubelet kubeadm kubectl
    kubelet set on hold.
    kubeadm set on hold.
    kubectl set on hold.
    ```

13. **cp(control plane) ì„œë²„ì˜ ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤ì˜ IP ì£¼ì†Œë¥¼ ì°¾ê¸°**
    ```bash
    root@k8s-master:~# hostname -i
    10.0.2.10
    root@k8s-master:~# ip addr show
    ....
    2: ens32: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000
        link/ether 00:0c:29:21:0d:81 brd ff:ff:ff:ff:ff:ff
        altname enp2s0
        inet 10.0.2.10/24 brd 10.0.2.255 scope global noprefixroute ens32
           valid_lft forever preferred_lft forever
        inet6 fe80::7c16:b1db:18ab:b74f/64 scope link noprefixroute
           valid_lft forever preferred_lft forever
    ```

14. **cp ì„œë²„ì— ëŒ€í•œ ë¡œì»¬ DNS ë³„ì¹­ì„ ì¶”ê°€**
    ```bash
    root@k8s-master:~# vim /etc/hosts
    10.0.2.10 k8s-master #<-- Add this line
    127.0.0.1 localhost
    ....
    ```

### 3.4 ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ êµ¬ì¶• (ë§ˆìŠ¤í„° ë…¸ë“œ)

#### 3.4.1 Install Kubernetes
```bash
root@k8s-master:~# vim kubeadm-config.yaml
# kubeadm-config.yaml ìƒì„± ë° ì—…ë¡œë“œ
apiVersion: kubeadm.k8s.io/v1beta3
kind: ClusterConfiguration
kubernetesVersion: 1.31.1                #<-- Use the word stable for newest version
controlPlaneEndpoint: "k8s-master:6443"  #<-- Use the alias we put in /etc/hosts not the IP
networking:
  podSubnet: 192.168.0.0/16
```

- **cpë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤. ì¶œë ¥ë¬¼ì„ ìŠ¤ìº”í•˜ì—¬ kubeadm-init.out ì— ì €ì¥**
  ```bash
  root@k8s-master:~# kubeadm init --config=kubeadm-config.yaml --upload-certs \
         | tee kubeadm-init.out             #<-- Save output for future review
  [init] Using Kubernetes version: v1.31.1
  [preflight] Running pre-flight checks
  
  <output_omitted>
  ```

> ğŸ’¡ **ì°¸ê³ **: kubeadm-config.yaml ë“±ì˜ ì˜¤ë¥˜ë¡œ kubeadm init ì‹¤íŒ¨í•˜ëŠ” ê²½ìš° â†’ kubeadm reset ì…ë ¥í•˜ì—¬ ì´ˆê¸°í™” â†’ ì„¤ì •ì„ ë‹¤ì‹œ ë°”ê¿”ì„œ kubeadm initì„ ìˆ˜í–‰

- **ë£¨íŠ¸ê°€ ì•„ë‹Œ ì‚¬ìš©ì ê´€ë¦¬ì ìˆ˜ì¤€ì˜ í´ëŸ¬ìŠ¤í„° ì•¡ì„¸ìŠ¤ë¥¼ í—ˆìš©**
  ```bash
  root@k8s-master:~# exit
  logout
  
  ubuntu@k8s-master:~$ mkdir -p $HOME/.kube
  ubuntu@k8s-master:~$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  ubuntu@k8s-master:~$ sudo chown $(id -u):$(id -g) $HOME/.kube/config
  ubuntu@k8s-master:~$ less .kube/config
  apiVersion: v1
  clusters:
  - cluster:
  <output_omitted>
  ```

- **ë„¤íŠ¸ì›Œí¬ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œ Ciliumì„ ì‚¬ìš©**
  ```bash
  ubuntu@k8s-master:~$ find $HOME -name cilium-cni.yaml
  # êµê°•ì‚¬ê°€ ì œê³µ
  ubuntu@k8s-master:~$ kubectl apply -f cilium-cni.yaml
  serviceaccount/cilium created
  serviceaccount/cilium-operator created
  secret/cilium-ca created
  secret/hubble-server-certs created
  configmap/cilium-config created
  <output_omitted>
  
  ubuntu@k8s-master:~$ kubectl get pods -A
  NAMESPACE     NAME                                 READY   STATUS    RESTARTS   AGE
  kube-system   cilium-operator-56bdb99ff6-cws5r     0/1     Pending   0          2m36s
  kube-system   cilium-operator-56bdb99ff6-qkw9p     1/1     Running   0          2m36s
  kube-system   cilium-r5z24                         1/1     Running   0          2m36s
  <output_omitted>
  ```

- **kubectl ëª…ë ¹ì˜ Bash ìë™ ì™„ì„±ì„ í™œì„±í™”**
  ```bash
  ubuntu@k8s-master:~$ sudo apt-get install bash-completion -y
  <exit and log back in>
  ubuntu@k8s-master:~$ source <(kubectl completion bash)
  ubuntu@k8s-master:~$ echo "source <(kubectl completion bash)" >> $HOME/.bashrc
  
  ubuntu@k8s-master:~$ alias k=kubectl
  ubuntu@k8s-master:~$ complete -o default -F __start_kubectl k
  ubuntu@k8s-master:~$ echo "alias k=kubectl" >> ~/.bashrc
  ubuntu@k8s-master:~$ echo "complete -o default -F __start_kubectl k" >> ~/.bashrc
  ```

#### 3.4.2 Ciliumê³¼ Calicoì˜ ì£¼ìš” íŠ¹ì§• ë¹„êµ

| êµ¬ë¶„ | Cilium | Calico |
|------|--------|--------|
| **ì¶œì‹œ ì‹œê¸°** | â€¢ 2017ë…„ ([GitHub ì¶œì‹œ ê¸°ë¡](https://github.com/cilium/cilium)) | â€¢ 2016ë…„ ([GitHub ì¶œì‹œ ê¸°ë¡](https://github.com/projectcalico/calico)) |
| **ì‚¬ìš©ì ìˆ˜ ë° ì¸ê¸°** | â€¢ CNCF Graduation level project([Ref.](https://www.cncf.io/projects/))ë¡œ ë“±ë¡ ([cilium](https://www.cncf.io/projects/cilium/))ë¨. ê³ ì„±ëŠ¥ ë° ë³´ì•ˆ ê¸°ëŠ¥ìœ¼ë¡œ ëŒ€ê·œëª¨ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì£¼ëª©ë°›ê³  ìˆìŒ | â€¢ Kubernetes ë„¤íŠ¸ì›Œí‚¹ ì†”ë£¨ì…˜ ì¤‘ ë„ë¦¬ ì‚¬ìš©ë˜ë©°, BGPë¥¼ í™œìš©í•œ ì•ˆì •ì„±ê³¼ í˜¸í™˜ì„±ìœ¼ë¡œ ë§ì€ ì‚¬ìš©ì ë³´ìœ  |
| **ë„¤íŠ¸ì›Œí‚¹ ë°©ì‹ ë° ì„±ëŠ¥** | â€¢ [eBPF](https://ebpf.io/what-is-ebpf/) ê¸°ë°˜ìœ¼ë¡œ ë†’ì€ ì„±ëŠ¥ê³¼ ë‚®ì€ ë ˆì´í„´ì‹œ ì œê³µ, eBPF ê¸°ë°˜ ë¡œë“œ ë°¸ëŸ°ì‹± ë° ì§ì ‘ ë¼ìš°íŒ… ì§€ì› | â€¢ BGP ë° VXLAN/IPIP ì§€ì›, ê¸°ë³¸ ì„±ëŠ¥ ì œê³µ, ë„¤íŠ¸ì›Œí¬ ì˜¤ë²„ë ˆì´ ì—†ëŠ” BGP ì‚¬ìš© ê°€ëŠ¥ |
| **ë³´ì•ˆ ë° ì •ì±… ì„¤ì •** | â€¢ L3/L4 ë° L7 ë ˆë²¨ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸ì‹ ì •ì±… ì§€ì› (HTTP, gRPC ë“±), Cilium Network Policy (Ref. [L7 example](https://docs.cilium.io/en/latest/security/policy/language/#layer-7-examples))ë¡œ ì„¸ë°€í•œ ì œì–´ ê°€ëŠ¥ | â€¢ L3/L4 ë ˆë²¨ ì •ì±… ì§€ì›, iptables ë° ì„ íƒì  eBPF ì‚¬ìš© ê°€ëŠ¥ |
| **ì„œë¹„ìŠ¤ ë©”ì‰¬ ë° í´ëŸ¬ìŠ¤í„° í†µì‹ ** | â€¢ Istio, Linkerd ë“±ê³¼ ë„¤ì´í‹°ë¸Œ í†µí•© ì§€ì›, ClusterMeshë¡œ í´ëŸ¬ìŠ¤í„° ê°„ í†µì‹  ë° ì„œë¹„ìŠ¤ ë°œê²¬ ì§€ì› | â€¢ ì„œë¹„ìŠ¤ ë©”ì‰¬ í†µí•© ì‹œ ì¶”ê°€ ì»´í¬ë„ŒíŠ¸ í•„ìš”, í´ëŸ¬ìŠ¤í„° ê°„ í†µì‹  ì§€ì› ì œí•œì  |
| **ì˜¨í”„ë ˆë¯¸ìŠ¤ í˜¸í™˜ì„± ë° ìš©ë„** | â€¢ ìµœì‹  ëŒ€ê·œëª¨ í™˜ê²½ì— ì í•©í•œ ì•„í‚¤í…ì²˜ë¡œ, ê³ ì„±ëŠ¥ê³¼ í™•ì¥ì„±ì´ í•„ìš”í•œ í™˜ê²½ì— ì í•© | â€¢ ê¸°ì¡´ ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼ì™€ í˜¸í™˜ì„± ë†’ì•„, ê°„ë‹¨í•˜ê³  ì•ˆì •ì ì¸ ë„¤íŠ¸ì›Œí‚¹ì´ í•„ìš”í•œ ê²½ìš° ìœ ë¦¬ |

### 3.5 ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ êµ¬ì¶• (ì›Œì»¤ ë…¸ë“œ)

#### 3.5.1 Install Kubernetes

ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ í´ëŸ¬ìŠ¤í„° ìƒì„± í•˜ê³  ë‚œ ë’¤, í† í°ì˜ ê°’ë“¤ë¡œ join í•˜ëŠ” ëª…ë ¹ì–´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. control-planeì´ ì•„ë‹Œ worker nodesì˜ ëª…ë ¹ì–´ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.

```bash
You can now join any number of the control-plane node running the following command on each as root:

  kubeadm join k8s-master:6443 --token 4yu434.25kdimbmjmgy7hy4 \
        --discovery-token-ca-cert-hash sha256:f2a9dd1cc184942ca231ab5bb1c4c18d1f12e78fb8ef36420792c0d4f071de9c \
        --control-plane --certificate-key 8e0ed744428048d0e11c2a12576d43015dffead927ad25f6045cd0686df076bf

Please note that the certificate-key gives access to cluster sensitive data, keep it secret!
As a safeguard, uploaded-certs will be deleted in two hours; If necessary, you can use
"kubeadm init phase upload-certs --upload-certs" to reload certs afterward.

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join k8s-master:6443 --token 4yu434.25kdimbmjmgy7hy4 \
        --discovery-token-ca-cert-hash sha256:f2a9dd1cc184942ca231ab5bb1c4c18d1f12e78fb8ef36420792c0d4f071de9c
```

**ì›Œì»¤ ë…¸ë“œì—ì„œ ì ‘ì†í•˜ì—¬, joinì„ ì‹œë„í•©ë‹ˆë‹¤.**
```bash
sudo kubeadm join k8s-master:6443 --token 4yu434.25kdimbmjmgy7hy4 \
        --discovery-token-ca-cert-hash sha256:f2a9dd1cc184942ca231ab5bb1c4c18d1f12e78fb8ef36420792c0d4f071de9c
```

**ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ k get nodes, k get pods -A ë¥¼ í†µí•´ nodesì™€ podsê°€ ì˜ ìƒì„± ëëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.**
```bash
ubuntu@k8s-master:~$ k get nodes
NAME          STATUS   ROLES           AGE    VERSION
k8s-master    Ready    control-plane   140m   v1.31.1
k8s-worker1   Ready    <none>          69m    v1.31.1
k8s-worker2   Ready    <none>          64m    v1.31.1

ubuntu@k8s-master:~$ k get pods -A
NAMESPACE     NAME                                 READY   STATUS    RESTARTS   AGE
kube-system   cilium-7fqch                         1/1     Running   0          69m
kube-system   cilium-7rrgm                         1/1     Running   0          65m
kube-system   cilium-btxrp                         1/1     Running   0          114m
kube-system   cilium-operator-ddb9b866-t6j8f       1/1     Running   0          114m
kube-system   cilium-operator-ddb9b866-xrxcq       1/1     Running   0          114m
kube-system   coredns-7c65d6cfc9-9rkqn             1/1     Running   0          140m
kube-system   coredns-7c65d6cfc9-zrslj             1/1     Running   0          140m
kube-system   etcd-k8s-master                      1/1     Running   0          140m
kube-system   kube-apiserver-k8s-master            1/1     Running   0          140m
kube-system   kube-controller-manager-k8s-master   1/1     Running   0          140m
kube-system   kube-proxy-4nzs4                     1/1     Running   0          65m
kube-system   kube-proxy-hcljz                     1/1     Running   0          140m
kube-system   kube-proxy-kjq8b                     1/1     Running   0          69m
kube-system   kube-scheduler-k8s-master            1/1     Running   0          140m
```

---

## 4. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ëª…ë ¹ì–´

### 4.1 Node ê´€ë¦¬

#### 4.1.1 Nodes
- ì»¨í…Œì´ë„ˆë¥¼ í¬í•¨í•œ **PodëŠ” Nodeì—ì„œ ì‹¤í–‰**ëœë‹¤.
- **NodeëŠ” ë¬¼ë¦¬ë¨¸ì‹ ì´ê±°ë‚˜ ê°€ìƒë¨¸ì‹ **ì´ë‹¤.
- NodeëŠ” **Control-planeì— ì˜í•´ ê´€ë¦¬**ë˜ë©° Podë¥¼ ì‹¤í–‰í•˜ëŠ”ë° í•„ìš”í•œ ì„œë¹„ìŠ¤ë¥¼ í¬í•¨í•œë‹¤

#### 4.1.2 kubectl get nodes
```bash
# nodeì˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì–»ì–´ì˜µë‹ˆë‹¤.
kubectl get nodes

# OS, Kernel, Containerì˜ ì •ë³´ë¥¼ ì–»ì–´ì˜µë‹ˆë‹¤.
kubectl get nodes -o wide
```

#### 4.1.3 Node ìŠ¤ì¼€ì¥´ë§ ì¤‘ë‹¨ ë° í—ˆìš©
```bash
# ë…¸ë“œ ìŠ¤ì¼€ì¤„ë§ ì¤‘ë‹¨(cordon)
kubectl cordon node_name

# ë…¸ë“œ ìŠ¤ì¼€ì¥´ë§ í—ˆìš©(uncordon)
kubectl uncordon node_name
```

#### 4.1.4 ë…¸ë“œ ë¹„ìš°ê¸°(drain)
- íŠ¹ì • ë…¸ë“œì—ì„œ ë™ì‘ì¤‘ì¸ ëª¨ë“  Podë¥¼ ì œê±°
```bash
kubectl drain NODE [options]
--ignore-daemonsets     # DaemonSet-managed podë“¤ì€ ignore.
--force=false          # RC, RS, Job, DaemonSet ë˜ëŠ” StatefulSetì—ì„œ ê´€ë¦¬í•˜ì§€ ì•ŠëŠ” Podê¹Œì§€ ì œê±°.
```

#### 4.1.5 ë…¸ë“œ ì‚­ì œ(delete)
```bash
kubectl delete node node_name
```

#### 4.1.6 ë…¸ë“œ ì¶”ê°€(join)
```bash
kubeadm join MASTER_IP:6443 --token XXX --discovery-token-ca-cert-hash XXXXXXXX
```

### 4.2 Pods ê´€ë¦¬

#### 4.2.1 Pods
- **ì»¨í…Œì´ë„ˆë¥¼ í‘œí˜„í•˜ëŠ” k8s APIì˜ ìµœì†Œ ë‹¨ìœ„**
- **í•˜ë‚˜ ë˜ëŠ” ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆì˜ ê·¸ë£¹**
- **ìŠ¤í† ë¦¬ì§€ ë° ë„¤íŠ¸ì›Œí¬ë¥¼ ê³µìœ **
- í•´ë‹¹ ì»¨í…Œì´ë„ˆë¥¼ êµ¬ë™í•˜ëŠ” ë°©ì‹ì— ëŒ€í•œ ëª…ì„¸ë¥¼ ê°€ì§„ë‹¤.

#### 4.2.2 Commands ëª…ë ¹ ì‹¤í–‰

![Pod ëª…ë ¹ì–´ ì‹¤í–‰](/assets/Images/10.Kubernetes/image%2011.png)

*kubectlì„ í†µí•œ Pod ëª…ë ¹ì–´ ì‹¤í–‰ êµ¬ì¡°*

#### 4.2.3 Pod Templateìœ¼ë¡œ Pod ì‹¤í–‰
- **íŒŒë“œí…œí”Œë¦¿(PodTemplate)ì€ íŒŒë“œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ëª…ì„¸**ì´ë‹¤.
- **Pod Templateì€ yaml í˜•ì‹ì´ë‚˜ json í˜•ì‹**ì„ ê°€ì§„ë‹¤.
- Pod Template ì„ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œ íŒŒë“œê°€ ë™ì‘ëœë‹¤.

![Pod Template](/assets/Images/10.Kubernetes/image%2012.png)

*Pod Templateì˜ êµ¬ì¡°ì™€ ì—­í• *

#### 4.2.4 Pod ê´€ë¦¬ Commands
```bash
# ë™ì‘ì¤‘ì¸ íŒŒë“œ ì •ë³´ ë³´ê¸°
kubectl get pods
kubectl describe pod webserver

# ë™ì‘ì¤‘ì¸ íŒŒë“œ ìˆ˜ì •
kubectl edit pod webserver

# ë™ì‘ì¤‘ì¸ íŒŒë“œ ì‚­ì œ
kubectl delete pod webserver

# íŒŒë“œë‚´ ì»¨í…Œì´ë„ˆ ë¡œê·¸ë³´ê¸°
kubectl logs webserver

# ë™ì‘ì¤‘ì¸ íŒŒë“œë¡œ ì—°ê²°
kubectl exec -it webserver -- /bin/bash
```

#### 4.2.5 Labelê³¼ Selector
- **Nodeë¥¼ í¬í•¨í•˜ì—¬ pod, deployment ë“± ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— í• ë‹¹**
- **ë¦¬ì†ŒìŠ¤ì˜ íŠ¹ì„±ì„ ë¶„ë¥˜í•˜ê³ , Selectorë¥¼ ì´ìš©í•´ì„œ ì„ íƒ**
- **Key-value í•œìŒìœ¼ë¡œ ì ìš©**

![Labelê³¼ Selector](/assets/Images/10.Kubernetes/image%2013.png)

*Labelê³¼ Selectorë¥¼ í™œìš©í•œ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬*

#### 4.2.6 Labelê³¼ Selector Command
```bash
# Label ë³´ê¸°
kubectl get pods --show-labels
kubectl get pods -l <label_name>

# Label ìƒì„± ë° ë³€ê²½
kubectl label pod <name> key=value
kubectl label pod <name> key=value --overwrite

# Label í™•ì¸
kubectl label pod <name> --show-labels

# Label ì œê±°
kubectl label pod <name> key-
```

#### 4.2.7 Annotation
- **Labelê³¼ ë™ì¼í•˜ê²Œ key-valueë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ì˜ íŠ¹ì„±ì„ ê¸°ë¡**
- **Kubernetes ì—ê²Œ íŠ¹ì • ì •ë³´ ì „ë‹¬í•  ìš©ë„ë¡œ ì‚¬ìš©**
- ì˜ˆë¥¼ ë“¤ì–´ Deploymentì˜ rolling update ì •ë³´ ê¸°ë¡
  ```yaml
  annotations:
    kubernetes.io/change-cause: version 1.15
  ```
- **ê´€ë¦¬ë¥¼ ìœ„í•´ í•„ìš”í•œ ì •ë³´ë¥¼ ê¸°ë¡í•  ìš©ë„ë¡œ ì‚¬ìš©**
- ë¦´ë¦¬ì¦ˆ, ë¡œê¹…, ëª¨ë‹ˆí„°ë§ì— í•„ìš”í•œ ì •ë³´ë“¤ì„ ê¸°ë¡
  ```yaml
  annotations:
    builder: "Seungsuk Ryoo (seungsuk.ryoo@bespinglobal.com)"
    buildDate: "20230814"
    imageRegistry: https://hub.docker.com/
  ```

#### 4.2.8 Node Label
- **Worker nodeì— í• ë‹¹ëœ labelì„ ì´ìš©í•´ nodeë¥¼ ì„ íƒ**
- node Label ì„¤ì •
  ```bash
  kubectl label nodes <ë…¸ë“œ ì´ë¦„> <ë ˆì´ë¸” í‚¤>=<ë ˆì´ë¸” ê°’>
  kubectl label nodes node1.example.com type=ssd
  kubectl get nodes -L type
  ```

![Node Label ì„¤ì •](/assets/Images/10.Kubernetes/image%2014.png)

*Node Labelì„ í™œìš©í•œ ë…¸ë“œ ì„ íƒ*

### 4.3 Controller

#### 4.3.1 ì»¨íŠ¸ë¡¤ëŸ¬ ì¢…ë¥˜

![ì»¨íŠ¸ë¡¤ëŸ¬ ì¢…ë¥˜](/assets/Images/10.Kubernetes/image%2015.png)

*Kubernetes ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë‹¤ì–‘í•œ ì¢…ë¥˜ì™€ ì—­í• *

#### 4.3.2 Replication Controller

![Replication Controller](/assets/Images/10.Kubernetes/image%2016.png)

*Replication Controllerì˜ ë™ì‘ ë°©ì‹*

#### 4.3.3 ReplicaSet
- **ReplicationController ì™€ ê°™ì€ ì—­í• ì„ í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬**
- **ReplicationController ë³´ë‹¤ í’ë¶€í•œ selector**
  ```yaml
  selector:
    matchLabels:
      component: redis
  matchExpressions:
    - {key: tier, operator: In, values: [cache]}
    - {key: environment, operator: NotIn, values: [dev]}
  ```

##### matchExpressions ì—°ì‚°ì
- **In**: keyì™€ valuesë¥¼ ì§€ì •í•˜ì—¬ key, valueê°€ ì¼ì¹˜í•˜ëŠ” Podë§Œ ì—°ê²°
- **NotIn**: keyëŠ” ì¼ì¹˜í•˜ê³  valueëŠ” ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” Podì— ì—°ê²°
- **Exists**: keyì— ë§ëŠ” labelì˜ podë¥¼ ì—°ê²°
- **DoesNotExist**: keyì™€ ë‹¤ë¥¸ labelì˜ podë¥¼ ì—°ê²°

#### 4.3.4 Deployment
- **ReplicaSetì„ ì»¨íŠ¸ë¡¤í•´ì„œ Podìˆ˜ë¥¼ ì¡°ì ˆ**
- **Rolling Update & Rolling Back**

![Deployment Rolling Update](/assets/Images/10.Kubernetes/image%2017.png)

*Deploymentì˜ Rolling Update ê³¼ì •*

##### Rolling Update
```bash
kubectl set image deployment <deploy_name> <container_name>=<new_version_image>
```

##### RollBack
```bash
kubectl rollout history deployment <deploy_name>
kubectl rollout undo deploy <deploy_name>
```

![Deployment Rollback](/assets/Images/10.Kubernetes/image%2018.png)

*Deploymentì˜ Rollback í”„ë¡œì„¸ìŠ¤*

##### Annotation
- key-valueë¥¼ í†µí•´ ë¦¬ì†ŒìŠ¤ íŠ¹ì„±ì„ ê¸°ë¡
- Kubernetes ì—ê²Œ íŠ¹ì • ì •ë³´ ì „ë‹¬í•  ìš©ë„ë¡œ ì‚¬ìš©
- ì˜ˆë¥¼ ë“¤ì–´ Deploymentì˜ rolling update ì •ë³´ ê¸°ë¡
  ```yaml
  annotations:
    kubernetes.io/change-cause: version 1.15
  ```

#### 4.3.5 DaemonSet
- **ì „ì²´ ë…¸ë“œì—ì„œ Podê°€ í•œ ê°œì”© ì‹¤í–‰ë˜ë„ë¡ ë³´ì¥**
- **ë¡œê·¸ ìˆ˜ì§‘ê¸°, ëª¨ë‹ˆí„°ë§ ì—ì´ì „íŠ¸ì™€ ê°™ì€ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ ì ìš©**

![DaemonSet](/assets/Images/10.Kubernetes/image%2019.png)

*DaemonSetì„ í†µí•œ ê° ë…¸ë“œë³„ Pod ë°°í¬*

#### 4.3.6 StatefulSet
- **Podì˜ ìƒíƒœë¥¼ ìœ ì§€í•´ì£¼ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬**
  - Pod ì´ë¦„
  - Podì˜ ë³¼ë¥¨(ìŠ¤í† ë¦¬ì§€)
- **PodëŠ” ê³ ìœ í•œ IDë¥¼ ê°€ì§€ê³  ìˆœì„œëŒ€ë¡œ ì‹¤í–‰**ëœë‹¤.

![StatefulSet](/assets/Images/10.Kubernetes/image%2020.png)

*StatefulSetì˜ ìˆœì°¨ì  Pod ìƒì„±ê³¼ ê´€ë¦¬*

#### 4.3.7 Job
- **KubernetesëŠ” Podë¥¼ running ì¤‘ì¸ ìƒíƒœë¡œ ìœ ì§€**
- **Batch ì²˜ë¦¬í•˜ëŠ” PodëŠ” ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì¢…ë£Œë¨**
  - ì‘ì—…ì´ ì™„ë£Œë˜ì–´ë„ Podê°€ ì œê±°ë˜ì§€ëŠ” ì•ŠìŒ
  - ì‘ì—…ì´ ì™„ë£Œë˜ëŠ” ì‹œì ì´ ì¤‘ìš”í•œ ì„œë¹„ìŠ¤ì— ìœ ìš©
- **Batch ì²˜ë¦¬ì— ì í•©í•œ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ Podì˜ ì„±ê³µì ì¸ ì™„ë£Œë¥¼ ë³´ì¥**
  - Pod ë‚´ì˜ ì»¨í…Œì´ë„ˆê°€ ë¹„ì •ìƒ ì¢…ë£Œ ì‹œ ë‹¤ì‹œ ì‹¤í–‰
  - Pod ë‚´ì˜ ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì¢…ë£Œ ì‹œ ì™„ë£Œ

![Job](/assets/Images/10.Kubernetes/image%2021.png)

*Jobì„ í†µí•œ ë°°ì¹˜ ì‘ì—… ì²˜ë¦¬*

#### 4.3.8 CronJob
- **job ì˜¤ë¸Œì íŠ¸ì— linux cronjobì˜ ìŠ¤ì¼€ì¤„ë§ ê¸°ëŠ¥ì„ ì¶”ê°€**
- ë‹¤ìŒê³¼ ê°™ì€ **ìë™í™” ì‘ì—…ì— ìœ ë¦¬**
  - Data Backup
  - Send email
  - Cleaning tasks
- **CronJob Controllerê°€ ê´€ë¦¬**
- **Cronjob Schedule: "0 3 1 * *"**
  - Minutes (from 0 to 59)
  - Hours (from 0 to 23)
  - Day of the month (from 1 to 31)
  - Month (from 1 to 12)
  - Day of the week (from 0 to 6)

![CronJob Schedule](/assets/Images/10.Kubernetes/image%2022.png)

*CronJob ìŠ¤ì¼€ì¤„ë§ í˜•ì‹*

### 4.4 Services

#### 4.4.1 docker0
- **ë¸Œë¦¿ì§€ ë„¤íŠ¸ì›Œí¬ëŠ” ëª¨ë“  Docker í˜¸ìŠ¤íŠ¸ì— ì¡´ì¬**
- **docker0**
  - Docker í˜¸ìŠ¤íŠ¸ì˜ default network
  - ì»¨í…Œì´ë„ˆë¥¼ NATë¥¼ ì‚¬ìš©í•˜ì—¬ í˜¸ìŠ¤íŠ¸ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ë¡œ í¬ì›Œë”©
  - 172.17.0.0/16ì„ ì‚¬ìš©í•˜ì—¬ DHCPë¡œ ì»¨í…Œì´ë„ˆì— IP address ì œê³µ
  - 172.17.0.1ì´ docker0ì— í• ë‹¹
  - ì»¨í…Œì´ë„ˆì— í• ë‹¹ëœ IP í™•ì¸: docker inspect

![Docker Network](/assets/Images/10.Kubernetes/image%2023.png)

*Dockerì˜ ê¸°ë³¸ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°*

#### 4.4.2 Multi Host Docker System

![Multi Host Docker](/assets/Images/10.Kubernetes/image%2024.png)

*ë©€í‹° í˜¸ìŠ¤íŠ¸ Docker ì‹œìŠ¤í…œ êµ¬ì¡°*

#### 4.4.3 Overlay Network
```bash
ip netns add v-net-0
ip link add v-net-0 type bridge
ip link set dev v-net-0 up
ip link add veth0 type veth peer name veth1
ip link set veth1 netns v-net-0
ip link set veth0 up
ip addr add 10.244.1.1/24 dev veth0
ip netns exec v-net-0 ip link set veth1up
ip netns exec v-net-0 ip addr add 10.244.1.2/24 dev veth1
ip netns exec v-net-0 ip route add 10.244.1.0/24 via
192.168.1.1
iptables â€“t nat â€“A POSTROUTING â€“s 10.244.0.0/24 â€“j
MASQUERADE
ip route add 10.244.1.0 via 192.168.1.1
ip route add 10.244.2.0 via 192.168.2.1
```

![Overlay Network 1](/assets/Images/10.Kubernetes/image%2025.png)

*Overlay Network êµ¬ì„±ë„ 1*

![Overlay Network 2](/assets/Images/10.Kubernetes/image%2026.png)

*Overlay Network êµ¬ì„±ë„ 2*

### 4.5 Self-Healing

#### 4.5.1 Liveness Probe
- **Podê°€ ê³„ì† ì‹¤í–‰í•  ìˆ˜ ìˆìŒì„ ë³´ì¥**
- **Podì˜ specì— ì •ì˜**

#### 4.5.2 Liveness ë©”ì»¤ë‹ˆì¦˜
- **httpGet probe**
- **tcpSocket probe**
- **exec probe**

#### 4.5.3 Liveness ë§¤ê°œ ë³€ìˆ˜
- **periodSeconds**: health check ë°˜ë³µ ì‹¤í–‰ ì‹œê°„(ì´ˆ)
- **initialDelaySeconds**: Pod ì‹¤í–‰ í›„ delayí•  ì‹œê°„(ì´ˆ)
- **timeoutSeconds**: health checkí›„ ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ì‹œê°„(ì´ˆ)

#### 4.5.4 ReadinessProbe
- **livenessì™€ ë¹„ìŠ·í•¨**
- **Podê°€ ì¤€ë¹„ê°€ ë˜ì—ˆì„ ë•Œ ì‹ í˜¸(Endpoint)ë¥¼ ë³´ëƒ„**
- **ReadinessProbe ë©”ì»¤ë‹ˆì¦˜**
  - httpGet
  - tcpSocket
  - exec

---

## 5. EKS ì„¤ì¹˜ ë° ì‚­ì œ

### 5.1 EKSë€

**Amazon Elastic Kubernetes Service(Amazon EKS)**ëŠ” Amazon Web Services(AWS) í´ë¼ìš°ë“œì™€ ìì²´ ë°ì´í„° ì„¼í„°([EKS Anywhere](https://anywhere.eks.amazonaws.com/) ë° [Amazon EKS Hybrid Nodes](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/hybrid-nodes-overview.html)) ëª¨ë‘ì—ì„œ [Kubernetes](https://kubernetes.io/docs/concepts/overview/) í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹¤í–‰í•˜ëŠ” ë° ìˆì–´ ìµœì ì˜ í”Œë«í¼ì…ë‹ˆë‹¤.

- Amazon EKSëŠ” **Kubernetes í´ëŸ¬ìŠ¤í„°ì˜ êµ¬ì¶•, ë³´ì•ˆ ë° ìœ ì§€ ê´€ë¦¬ë¥¼ ê°„ì†Œí™”**í•©ë‹ˆë‹¤. 
- ìì²´ ë°ì´í„° ì„¼í„°ë¥¼ ìœ ì§€ ê´€ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ **í”¼í¬ ìˆ˜ìš”ë¥¼ ì¶©ì¡±í•  ìˆ˜ ìˆë„ë¡ ì¶©ë¶„í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•˜ëŠ” í¸ì´ ë¹„ìš© íš¨ìœ¨ì **

### 5.2 Amazon EKS ì‚¬ìš©ê³¼ ê´€ë ¨ëœ ë‘ ê°€ì§€ ì£¼ìš” ì ‘ê·¼ ë°©ì‹

#### 5.2.1 EKS í‘œì¤€
EKSë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ë•Œ AWSê°€ [Kubernetes ì»¨íŠ¸ë¡¤ í”Œë ˆì¸](https://kubernetes.io/docs/concepts/overview/components/#control-plane-components)(Kubernetes ë°ì´í„° í”Œë ˆì¸)ë„ ê´€ë¦¬í•˜ë„ë¡ ì œì–´ë¥¼ í™•ì¥í•©ë‹ˆë‹¤. ì¸í”„ë¼ë¥¼ ìë™ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹í•˜ê³ , ìµœì ì˜ ì»´í“¨íŒ… ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì„ íƒí•˜ê³ , ë¦¬ì†ŒìŠ¤ë¥¼ ë™ì ìœ¼ë¡œ í™•ì¥í•˜ê³ , ë¹„ìš©ì„ ì§€ì†ì ìœ¼ë¡œ ìµœì í™”í•˜ê³ , ìš´ì˜ ì²´ì œë¥¼ íŒ¨ì¹˜í•˜ê³ , AWS ë³´ì•ˆ ì„œë¹„ìŠ¤ì™€ í†µí•©í•˜ì—¬ Kubernetes ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•©ë‹ˆë‹¤.

ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. **ë…¸ë“œë¥¼ ê´€ë¦¬í•˜ê³ , ì›Œí¬ë¡œë“œë¥¼ ì˜ˆì•½í•˜ê³ , AWS í´ë¼ìš°ë“œì™€ í†µí•©í•˜ê³ , ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  í™•ì¥**í•˜ì—¬ í´ëŸ¬ìŠ¤í„°ì˜ ê°€ë™ì„ ìœ ì§€í•˜ë„ë¡ í•˜ëŠ” êµ¬ì„± ìš”ì†Œê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

#### 5.2.2 EKS Auto Mode
[EKS Auto Mode](https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/automode.html) ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë©´ EKSëŠ” [ë…¸ë“œ](https://kubernetes.io/docs/concepts/overview/components/#node-components)

![EKS êµ¬ì¡°ë„](/assets/Images/10.Kubernetes/eks-architecture.png)

*Amazon EKSì˜ êµ¬ì¡°ì™€ êµ¬ì„± ìš”ì†Œ*

Amazon EKSë¥¼ ì‚¬ìš©í•˜ë©´ **í”„ë¡œë•ì…˜ ì‹œê°„ì„ ë‹¨ì¶•í•˜ê³ , ì„±ëŠ¥, ê°€ìš©ì„± ë° ë³µì›ë ¥ì„ ê°œì„ í•˜ê³ , ì‹œìŠ¤í…œ ë³´ì•ˆì„ ê°•í™”**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 

> ğŸ“– **ìì„¸í•œ ë‚´ìš©**: [Amazon Elastic Kubernetes Service](https://aws.amazon.com/eks/)ë¥¼ ì°¸ì¡°

### 5.3 CLI ì„¤ì¹˜

#### 5.3.1 ê¸°ë³¸ ì„¤ì • í™•ì¸
```bash
aws sts get-caller-identity
complete
which aws_completer
echo $PATH
aws d[TAB][TAB]
```

**ì„œìš¸ë¦¬ì „ì´ê³ , ê¸°ë³¸VPCê°€ ìˆëŠ”ì§€ í™•ì¸**
```bash
echo $AWS_REGION
# => ap-northeast-2
aws ec2 describe-vpcs --filters "Name=is-default,Values=true"
# ê¸°ë³¸ VPCê°€ ì—†ìœ¼ë©´ ìƒì„±í•˜ê¸°
```

#### 5.3.2 CloudFormation ìŠ¤íƒ ë°°í¬

CloudFormation ìŠ¤íƒì„ ë°°í¬í•˜ëŠ” ë° **ì•½ 5ë¶„ì´ìƒ ì†Œìš”**ë˜ë©°, ì™„ë£Œë˜ë©´ ì¶œë ¥(Outputs) íƒ­ì—ì„œ ê³„ì†í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**eks-workshop-ide-cfn.yaml**ì„ ì‚¬ìš©í•˜ì—¬ EKS ì›Œí¬ìƒµ í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤:

```yaml
AWSTemplateFormatVersion: "2010-09-09"
Description: Creates a code-server IDE for the EKS workshop
Parameters:
  InstanceVolumeSize:
    Type: Number
    Description: The Size in GB of the Cloud9 Instance Volume.
    Default: 30
  RepositoryOwner:
    Type: String
    Description: The owner of the GitHub repository to be used to bootstrap Cloud9
    Default: "aws-samples"
  RepositoryName:
    Type: String
    Description: The name of the GitHub repository to be used to bootstrap Cloud9
    Default: "eks-workshop-v2"
  RepositoryRef:
    Type: String
    Description: The Git reference to be used to bootstrap Cloud9
    Default: "main"
  # ... (ë‚˜ë¨¸ì§€ CloudFormation í…œí”Œë¦¿ ë‚´ìš©)
```

**ë°°í¬ ëª…ë ¹ì–´:**
```bash
ls
eks-workshop-ide-cfn.yaml

aws cloudformation deploy --stack-name eks-workshop-ide \
    --template-file ./eks-workshop-ide-cfn.yaml \
    --parameter-overrides RepositoryRef=stable \
    --capabilities CAPABILITY_NAMED_IAM
```

#### 5.3.3 ì¶œë ¥ ê°’ í™•ì¸
- **IdeUrl** ì¶œë ¥ì—ëŠ” IDEì— ì•¡ì„¸ìŠ¤í•˜ê¸° ìœ„í•´ ë¸Œë¼ìš°ì €ì— ì…ë ¥í•  URLì´ í¬í•¨
- **IdePasswordSecret** ì¶œë ¥ì—ëŠ” IDEì— ëŒ€í•´ ìƒì„±ëœ ì•”í˜¸ê°€ í¬í•¨ëœ AWS Secrets Manager ë¹„ë°€ì— ëŒ€í•œ ë§í¬ê°€ í¬í•¨

### 5.4 EKS í´ëŸ¬ìŠ¤í„° ìƒì„±

#### 5.4.1 cluster.yaml ì„¤ì •
```yaml
apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig
availabilityZones:
  - ${AWS_REGION}a
  - ${AWS_REGION}b
  - ${AWS_REGION}c
metadata:
  name: ${EKS_CLUSTER_NAME}
  region: ${AWS_REGION}
  version: "1.31"
  tags:
    karpenter.sh/discovery: ${EKS_CLUSTER_NAME}
    created-by: eks-workshop-v2
    env: ${EKS_CLUSTER_NAME}
iam:
  withOIDC: true
vpc:
  cidr: 10.42.0.0/16
  clusterEndpoints:
    privateAccess: true
    publicAccess: true
remoteNetworkConfig:
  remoteNodeNetworks:
    - cidrs: ["10.52.0.0/16"]
  remotePodNetworks:
    - cidrs: ["10.53.0.0/16"]
addons:
  - name: vpc-cni
    version: 1.19.2
    configurationValues: '{"env":{"ENABLE_PREFIX_DELEGATION":"true", "ENABLE_POD_ENI":"true", "POD_SECURITY_GROUP_ENFORCING_MODE":"standard"},"enableNetworkPolicy": "true", "nodeAgent": {"enablePolicyEventLogs": "true"}}'
    resolveConflicts: overwrite
managedNodeGroups:
  - name: default
    desiredCapacity: 3
    minSize: 3
    maxSize: 6
    instanceType: m5.large
    privateNetworking: true
    releaseVersion: "1.31.3-20250103"
    updateConfig:
      maxUnavailablePercentage: 50
    labels:
      workshop-default: "yes"
```

#### 5.4.2 í´ëŸ¬ìŠ¤í„° ìƒì„± ëª…ë ¹ì–´
```bash
ec2-user:~/environment:$ echo $AWS_REGION
ap-northeast-2

ec2-user:~/environment:$ export EKS_CLUSTER_NAME=eks-workshop
ec2-user:~/environment:$ echo $EKS_CLUSTER_NAME
eks-workshop

ec2-user:~/environment:$ cat cluster.yaml
# ..
ec2-user:~/environment:$ cat cluster.yaml | envsubst

ec2-user:~/environment:$ cat cluster.yaml | envsubst > cluster-k8s-user.yaml
ec2-user:~/environment:$ ls
cluster-k8s-user.yaml  cluster.yaml

ec2-user:~/environment:$ eksctl create cluster -f cluster-k8s-user.yaml
2025-05-23 02:37:15 [â„¹]  eksctl version 0.207.0
```

ì´ ì„¹ì…˜ì—ì„œëŠ” [eksctl ë„êµ¬](https://eksctl.io/)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ìŠµì„ ìœ„í•œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ëŠ” **ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•**ì´ë©°, ëŒ€ë¶€ë¶„ì˜ í•™ìŠµìì—ê²Œ ê¶Œì¥ë©ë‹ˆë‹¤.

ë˜í•œ, Amazon Cloud9 í™˜ê²½ì—ëŠ” **eksctl ìœ í‹¸ë¦¬í‹°ê°€ ë¯¸ë¦¬ ì„¤ì¹˜ë˜ì–´ ìˆìœ¼ë¯€ë¡œ**, ë°”ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ğŸ“– **ì°¸ê³ **: [eksctl Installation](https://eksctl.io/installation/)

---

## ğŸ“ í•™ìŠµ í¬ì¸íŠ¸ ìš”ì•½

### ğŸ¯ í•µì‹¬ ê°œë…
1. **í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ**ëŠ” í˜„ëŒ€ì ì´ê³  ë™ì ì¸ í™˜ê²½ì—ì„œ í™•ì¥ ê°€ëŠ¥í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê¸°ìˆ 
2. **Kubernetes**ëŠ” ì»¨í…Œì´ë„ˆ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ì„ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°°í¬, í™•ì¥, ê´€ë¦¬ë¥¼ ìë™í™”
3. **CNCF ì •ì˜ í•µì‹¬ ê¸°ìˆ **: ì»¨í…Œì´ë„ˆ, ì„œë¹„ìŠ¤ ë©”ì‰¬, ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤, ë¶ˆë³€ ì¸í”„ë¼, ì„ ì–¸í˜• API
4. **kubeadm**ì„ í†µí•œ ì˜¨í”„ë ˆë¯¸ìŠ¤ Kubernetes í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ê³¼ **EKS**ë¥¼ í†µí•œ í´ë¼ìš°ë“œ ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ í™œìš©

### ğŸ› ï¸ ì‹¤ë¬´ í™œìš© íŒ
- **ê°œë°œ í™˜ê²½**: Minikubeë‚˜ Docker Desktop Kubernetes í™œìš©
- **ìš´ì˜ í™˜ê²½**: EKS, GKE, AKS ë“± ê´€ë¦¬í˜• ì„œë¹„ìŠ¤ ê¶Œì¥
- **ë„¤íŠ¸ì›Œí‚¹**: Ciliumê³¼ Calico ì¤‘ í™˜ê²½ì— ë§ëŠ” CNI ì„ íƒ
- **ëª¨ë‹ˆí„°ë§**: ìê°€ ì¹˜ìœ  ê¸°ëŠ¥ì„ ìœ„í•œ Liveness/Readiness Probe ì„¤ì •

### ğŸ”„ DevOps ì—°ê³„
- **CI/CD íŒŒì´í”„ë¼ì¸**ê³¼ Kubernetes ì—°ë™ìœ¼ë¡œ ìë™í™”ëœ ë°°í¬ êµ¬í˜„
- **Infrastructure as Code**ë¥¼ í†µí•œ ì¼ê´€ëœ í™˜ê²½ ê´€ë¦¬
- **ì„ ì–¸í˜• API**ë¥¼ í™œìš©í•œ GitOps ì›Œí¬í”Œë¡œìš° êµ¬ì¶•

### ğŸ“š ë‹¤ìŒ ë‹¨ê³„
ì´ ê°€ì´ë“œë¥¼ í†µí•´ Cloud Nativeì™€ Kubernetesì˜ ê¸°ë³¸ ê°œë…ì„ ìµí˜”ë‹¤ë©´, ë‹¤ìŒìœ¼ë¡œ **Helmì„ í™œìš©í•œ íŒ¨í‚¤ì§€ ê´€ë¦¬**, **ì„œë¹„ìŠ¤ ë©”ì‰¬ êµ¬í˜„**, **ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•**ì„ í•™ìŠµí•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤.

---

> ğŸ’¡ **ì¶”ê°€ í•™ìŠµ ìë£Œ**: 
> - [Kubernetes ê³µì‹ ë¬¸ì„œ](https://kubernetes.io/ko/docs/home/)
> - [CNCF í”„ë¡œì íŠ¸](https://www.cncf.io/projects/)
> - [AWS EKS ì›Œí¬ìƒµ](https://www.eksworkshop.com/)ì—ì„œ ë” ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.